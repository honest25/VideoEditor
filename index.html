<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CinemaStudio Pro | Hollywood Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body { background: #08080a; color: #fff; font-family: sans-serif; margin: 0; overflow: hidden; }
        #app { display: none; height: 100vh; flex-direction: column; }
        #loader { 
            position: fixed; inset: 0; background: #000; z-index: 999; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
        }
        canvas { background: #000; width: 100%; height: 100%; object-fit: contain; }
        .timeline { height: 180px; background: #111; border-top: 2px solid #333; padding: 20px; }
        .scrubber-container { position: relative; height: 60px; background: #222; border-radius: 4px; overflow: hidden; }
        input[type=range] { position: absolute; width: 100%; top:0; left:0; height: 100%; opacity: 0; cursor: pointer; z-index: 10; }
        .playhead { position: absolute; top:0; bottom:0; width: 2px; background: red; pointer-events: none; }
    </style>

    <script>
        // CORE ENGINE - INITIALIZED IMMEDIATELY
        const state = {
            video: null,
            canvas: null,
            ctx: null,
            filter: 'none'
        };

        function forceStart() {
            console.log("Forcing Start...");
            const loader = document.getElementById('loader');
            const app = document.getElementById('app');
            
            if (loader) loader.style.display = 'none';
            if (app) app.style.display = 'flex';
            
            state.canvas = document.getElementById('main-view');
            state.ctx = state.canvas.getContext('2d');
            state.video = document.getElementById('v-engine');
            
            // Set resolution
            state.canvas.width = 1280;
            state.canvas.height = 720;
            
            drawLoop();
        }

        function drawLoop() {
            if (state.video && state.video.readyState >= 2) {
                state.ctx.filter = state.filter;
                state.ctx.drawImage(state.video, 0, 0, 1280, 720);
                
                const progress = (state.video.currentTime / state.video.duration) * 100;
                document.getElementById('p-head').style.left = progress + '%';
            }
            requestAnimationFrame(drawLoop);
        }

        function handleFile(input) {
            const file = input.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                state.video.src = url;
                state.video.load();
                document.getElementById('clip-name').innerText = file.name;
            }
        }

        function togglePlay() {
            if (state.video.paused) state.video.play();
            else state.video.pause();
        }

        function scrub(val) {
            if (state.video.duration) {
                state.video.currentTime = (val / 100) * state.video.duration;
            }
        }

        // Auto-start backup
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(forceStart, 1000);
        });
    </script>
</head>
<body>

    <div id="loader">
        <h1 style="color: #3b82f6; letter-spacing: 5px; font-weight: bold; margin-bottom: 20px;">CINEMASTUDIO PRO</h1>
        <button onclick="forceStart()" style="background: #3b82f6; color: white; padding: 10px 20px; border-radius: 5px; border: none; cursor: pointer; font-weight: bold;">
            CLICK HERE TO START ENGINE
        </button>
        <p style="font-size: 10px; color: #444; margin-top: 15px;">Hardware acceleration recommended</p>
    </div>

    <div id="app">
        <nav class="p-4 bg-zinc-900 border-b border-zinc-800 flex justify-between items-center">
            <h2 class="font-bold text-blue-500">CP ENGINE</h2>
            <div>
                <button onclick="document.getElementById('f-in').click()" class="bg-zinc-700 px-4 py-1 rounded text-xs mr-2">ADD CLIP</button>
                <button onclick="alert('Export processing...')" class="bg-blue-600 px-4 py-1 rounded text-xs">RENDER</button>
            </div>
        </nav>

        <main class="flex-1 flex flex-col items-center justify-center p-4">
            <div class="w-full max-w-4xl aspect-video bg-black shadow-2xl relative">
                <canvas id="main-view"></canvas>
                <div onclick="togglePlay()" class="absolute inset-0 cursor-pointer"></div>
            </div>
            
            <div class="mt-4 flex gap-4">
                <button onclick="state.filter='none'" class="text-[10px] border border-zinc-700 px-3 py-1">RAW</button>
                <button onclick="state.filter='grayscale(1)'" class="text-[10px] border border-zinc-700 px-3 py-1">NOIR</button>
                <button onclick="state.filter='sepia(1)'" class="text-[10px] border border-zinc-700 px-3 py-1">VINTAGE</button>
            </div>
        </main>

        <footer class="timeline">
            <div class="mb-2 flex justify-between text-[10px] text-zinc-500 font-mono">
                <span id="clip-name">NO MEDIA</span>
                <span>1080p / 30fps</span>
            </div>
            <div class="scrubber-container">
                <div id="p-head" class="playhead"></div>
                <input type="range" min="0" max="100" value="0" oninput="scrub(this.value)">
                <div class="h-full w-full flex items-center px-4 bg-blue-900/20 text-[10px] font-bold">VIDEO_TRACK_01</div>
            </div>
            <div class="mt-4 flex justify-center">
                <button onclick="togglePlay()" class="bg-white text-black px-6 py-1 rounded-full font-bold">PLAY / PAUSE</button>
            </div>
        </footer>

        <input type="file" id="f-in" class="hidden" accept="video/*" onchange="handleFile(this)">
        <video id="v-engine" class="hidden" loop></video>
    </div>

</body>
</html>
